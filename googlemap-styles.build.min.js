!function(e){window.GoogleMaps=function(){var t=[],i=!1,s=e.Deferred(),o=function(e){return e instanceof GoogleMap&&(t.push(e),i&&e.init(),e)},n=function(){t.forEach(function(e){e.init()}),i=!0};return window.googleMapsInit=function(){"function"==typeof window.GoogleMaps.onInit&&window.GoogleMaps.onInit(),s.resolve(t),google.maps.event.addDomListener(window,"load",n)},{addMap:o,promise:function(){return s.promise()}}}()}(jQuery),function(e){var t={el:"#map",zoom:14,controls:!1,styles:[],centerToLocationOnResize:100},i=window.GoogleMap=function i(s){if("object"!=typeof s)throw"Options required.";if(this.options=e.extend({},t,s),!this.options.coords)throw"Coords are required.";this.options.el||(this.options.el=i.DEFAULTS.el),this.options.zoom||(this.options.zoom=i.DEFAULTS.zoom),this.options.styles||(this.options.styles=i.DEFAULTS.styles),this.el=null,this.$el=null,this.map=null,this._animations={},this._$animEl=e("<div></div>"),this._idHTMLCounter=0,this._idMarkerCounter=0,this._idInfoCounter=0,this._markers=[],this._markersDefers={},this._infos=[],this._infosDefers={},this._htmls=[],this._htmlsDefers={},this.markers={},this.groupedMarkers={},this.infos={},this.HTMLs={},this.markerId=null,this.infoId=null,this.HTMLId=null,this._defer=e.Deferred(),GoogleMaps.addMap(this)},s=function(e){switch(e){case"HTML":return this.HTMLs[++this._idHTMLCounter]?s.call(this,e):this._idHTMLCounter;case"Marker":return this.markers[++this._idMarkerCounter]?s.call(this,e):this._idMarkerCounter;case"Info":return this.infos[++this._idInfoCounter]?s.call(this,e):this._idInfoCounter}},o=function(){e.each(this.infos,function(e,t){t.close()})},n=function(e,t){var i=!1,s=this;google.maps.event.addListener(t,"touchend",function(){i=!0,o.call(s),e.open(this.map,this)}),google.maps.event.addListener(t,"click",function(){return i?void(i=!1):(o.call(s),void e.open(this.map,this))})};i.DEFAULTS=t,i.STYLES={},i.STYLES.empty=function(){return[]},i.prototype.init=function(){this.$el=this.options.el.jquery?this.options.el:e(this.options.el),this.el=this.$el[0];var t={zoom:this.options.zoom};this.options.coords instanceof google.maps.LatLng?t.location=this.options.coords:t.location=new google.maps.LatLng(this.options.coords[0],this.options.coords[1]),this.options.styles instanceof GoogleMapStyle?t.styles=this.options.styles.getStyles():t.styles=this.options.styles,t.center=t.location,this.options.controls||i.DEFAULTS.controls||(t.zoomControl=!1,t.mapTypeControl=!1,t.scaleControl=!1,t.streetViewControl=!1,t.rotateControl=!1,t.fullscreenControl=!1),this.options.options&&(t=e.extend({},t,this.options.options)),this.map=new google.maps.Map(this.el,t),this.options.centerToLocationOnResize&&this.initCenterToLocationOnResize(this.options.centerToLocationOnResize),this.initialized=!0,(this.options.icon||this.options.addMarker)&&(this.markerId=s.call(this,"Marker"),this.options.info&&(this.infoId=s.call(this,"Info")),this.addMarker({coords:t.location,icon:this.options.icon,info:this.options.info,infoId:this.options.infoId,id:this.markerId})),this.options.markers&&this.options.markers.forEach(this.addMarker.bind(this)),this.options.html&&(this.options.html instanceof Array?this.options.html.forEach(this.addHTML.bind(this)):(this.HTMLId=s.call(this,"HTML"),this.addHTML({html:this.options.html,id:this.HTMLId}))),this._markers.forEach(this.addMarker.bind(this)),this._infos.forEach(this.addInfo.bind(this)),this._htmls.forEach(this.addHTML.bind(this)),"function"==typeof this.options.onInit&&this.options.onInit.call(this),this._defer.resolve(this,this.markers[this.markerId],this.markerId)},i.prototype.promise=function(){return this._defer.promise()},i.prototype.addMarker=function(t){t=t||{};var i=t.id||s.call(this,"Marker"),o=this._markersDefers[t.id]||e.Deferred();if(!this.initialized)return t.id=t.id||i,this._markers.push(t),this._markersDefers[t.id]=o,o.promise();!t.coords||t.coords instanceof google.maps.LatLng||(t.coords=new google.maps.LatLng(t.coords[0],t.coords[1]));var n={position:t.coords||this.map.location,map:this.map,icon:t.icon||this.options.icon};t.options&&(n=e.extend({},n,t.options));var r=new google.maps.Marker(n);return t.info&&this.addInfo({content:t.info,marker:r,id:t.infoId}),this.markers[i]=r,t.group=t.group||"no-group",this.groupedMarkers[t.group]=this.groupedMarkers[t.group]||{},this.groupedMarkers[t.group][i]=r,o.resolve(this,r,i),o.promise()},i.prototype.getMarker=function(e){return this.markers[e]||null},i.prototype.addInfo=function(t){t=t||{};var i=t.id||s.call(this,"Info"),o=this._infosDefers[t.id]||e.Deferred();if(!this.initialized)return t.id=t.id||i,this._infos.push(t),this._infosDefers[t.id]=o,o.promise();t.marker=t.marker||this.markers[this.markers.length-1];var r={content:t.content};t.options&&(r=e.extend({},r,t.options));var l=new google.maps.InfoWindow(r);return n.call(this,l,t.marker),this.infos[i]=l,o.resolve(this,l,i),o.promise()},i.prototype.getInfo=function(e){return this.infos[e]||null},i.prototype.addHTML=function(t){t=t||{};var i=t.id||s.call(this,"HTML"),o=this._htmlsDefers[t.id]||e.Deferred();if(!this.initialized)return"string"==typeof t?t={html:t,id:i}:t.id=t.id||i,this._htmls.push(t),this._htmlsDefers[t.id]=o,o.promise();var n="string"==typeof t||t instanceof HTMLElement?t:t.html,r="object"!=typeof t||t instanceof HTMLElement?null:t.coords,l="object"!=typeof t||t instanceof HTMLElement?null:t.draw,a=new GoogleMapHTMLOverlay(this.map,n,r,l);return this.HTMLs[i]=a,o.resolve(this,a,i),o.promise()},i.prototype.getHTML=function(e){return this.HTMLs[e]||null},i.getStyles=function(e,t){var s;return s=i.STYLES[e]?new GoogleMapStyle(i.STYLES[e]()):new GoogleMapStyle(i.STYLES.empty()),"function"==typeof t&&t.call(s),s},i.prototype.initCenterToLocationOnResize=function(e){if(!this.resizeInitialized){var t="number"==typeof e,i=this;google.maps.event.addDomListener(window,"resize",function(){return t?(clearTimeout(t),void(t=setTimeout(i.centerToLocation.bind(i),e))):void i.centerToLocation()}),this.resizeInitialized=!0}},i.prototype.centerToLocation=function(){this.map.setCenter(this.map.location)},i.prototype.center=function(e){"string"!=typeof e&&"number"!=typeof e||(e=this.getMarker(e)||this.getHTML(e)),e instanceof Array&&(e=new google.maps.LatLng(e[0],e[1])),e instanceof google.maps.LatLng?this.map.setCenter(e):e&&e.position?this.map.setCenter(e.position):this.centerToLocation()},i.prototype.animate=function(e,t,i){if("string"!=typeof e&&"number"!=typeof e||(e=this.getMarker(e)),e){var s=e.getPosition().toString();clearTimeout(this._animations[s]),null!==e.getAnimation()&&e.setAnimation(null),e.setAnimation(i||google.maps.Animation.BOUNCE),this._animations[s]=setTimeout(e.setAnimation.bind(e,null),t||2800)}},i.prototype.animateGroup=function(t,i,s){e.each(this.groupedMarkers[t],function(e,t){this.animate(t,i,s)}.bind(this))},i.prototype.opacity=function(e,t,i,s){if("string"!=typeof e&&"number"!=typeof e||(e=this.getMarker(e)),e&&i){var o;return void this._$animEl.stop(!0,!0).animate({opacity:t},{duration:i,progress:function(i,s){"number"!=typeof o&&(o="number"==typeof e.getOpacity()?e.getOpacity():e.getVisible()?1:0);var n=o-t;n&&e.setOpacity(o-n*s),!e.getVisible()&&t>0&&e.setVisible(!0),0===t&&1===s&&e.setVisible(!1)},easing:s||"linear"})}e.setOpacity(t),e.setVisible(t>0)},i.prototype.groupOpacity=function(t,i,s,o){if(s){var n=[];return void this._$animEl.stop(!0,!0).animate({opacity:i},{duration:s,progress:function(s,o){e.each(this.groupedMarkers[t],function(e,t){"number"!=typeof n[e]&&(n[e]="number"==typeof t.getOpacity()?t.getOpacity():t.getVisible()?1:0);var s=n[e]-i;s&&t.setOpacity(n[e]-s*o),!t.getVisible()&&i>0&&t.setVisible(!0),0===i&&1===o&&t.setVisible(!1)}.bind(this))}.bind(this),easing:o||"linear"})}e.each(this.groupedMarkers[t],function(e,t){t.setOpacity(i),t.setVisible(i>0)}.bind(this))},i.prototype.show=function(e,t,i){this.opacity(e,1,t,i)},i.prototype.showGroup=function(e,t,i){this.groupOpacity(e,1,t,i)},i.prototype.hide=function(e,t,i){this.opacity(e,0,t,i)},i.prototype.hideGroup=function(e,t,i){this.groupOpacity(e,0,t,i)},i.prototype.highlight=function(t,i,s,o){if(s=s||0,"string"!=typeof t&&"number"!=typeof t||(t=this.getMarker(t)),i){var n=[];return void this._$animEl.stop(!0).animate({opacity:s},{duration:i,progress:function(i,o){e.each(this.markers,function(e,i){"number"!=typeof n[e]&&(n[e]="number"==typeof i.getOpacity()?i.getOpacity():i.getVisible()?1:0);var r=i!==t&&t!==!1?s:1,l=n[e]-r;l&&i.setOpacity(n[e]-l*o),0===r&&1===o&&i.setVisible(!1),r>0&&!i.getVisible()&&i.setVisible(!0)})}.bind(this),easing:o||"linear"})}e.each(this.markers,function(e,i){s?(i.setOpacity(i===t||t===!1?1:s),(i===t||t===!1||s>0)&&i.setVisible(!0),i!==t&&t===!1&&0===s&&i.setVisible(!1)):(i!==t&&t!==!1||i.setOpacity(1),i.setVisible(i===t||t===!1))})},i.prototype.highlightGroup=function(t,i,s,o){if(s=s||0,i){var n={};return void this._$animEl.stop(!0).animate({opacity:s},{duration:i,progress:function(i,o){e.each(this.groupedMarkers,function(i){"object"!=typeof n[i]&&(n[i]=[]),e.each(this.groupedMarkers[i],function(e,r){"number"!=typeof n[i][e]&&(n[i][e]="number"==typeof r.getOpacity()?r.getOpacity():r.getVisible()?1:0);var l=i!==t&&t!==!1?s:1,a=n[i][e]-l;a&&r.setOpacity(n[i][e]-a*o),0===l&&1===o&&r.setVisible(!1),l>0&&!r.getVisible()&&r.setVisible(!0)}.bind(this))}.bind(this))}.bind(this),easing:o||"linear"})}e.each(this.groupedMarkers,function(i){e.each(this.groupedMarkers[i],function(e,o){s?(o.setOpacity(i===t||t===!1?1:s),(i===t||t===!1||s>0)&&o.setVisible(!0),i!==t&&t===!1&&0===s&&o.setVisible(!1)):(i!==t&&t!==!1||o.setOpacity(1),o.setVisible(i===t||t===!1))}.bind(this))}.bind(this))},i.prototype.on=function(e,t){return this.map.addListener(e,t)},i.prototype.off=function(e){this.map.removeListener(e)},i.prototype.onMarker=function(e,t,i){return"string"!=typeof e&&"number"!=typeof e||(e=this.getMarker(e)),google.maps.event.addListener(e,t,i)},i.prototype.offMarker=function(e){google.maps.event.removeListener(e)}}(jQuery),function(e){var t=window.GoogleMapHTMLOverlay=function(e,t,i,s){this.html=t,this.$el=null,this.el=null,this.map=e,s&&(this.draw=s),i instanceof google.maps.LatLng?this.position=i:i instanceof google.maps.Marker?this.position=i.position:i instanceof Array?this.position=new google.maps.LatLng(i[0],i[1]):this.position=this.map.location,this.setMap(e)};GoogleMaps.promise().then(function(){t.prototype=new google.maps.OverlayView,t.prototype.onAdd=function(){var t=this.getPanes();this.$el=e("<div></div>"),this.$el.css("position","absolute").html(this.html).appendTo(t.overlayLayer),this.el=this.$el[0]},t.prototype.draw=function(){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.position),i={width:this.el.offsetWidth,height:this.el.offsetHeight};this.el.style.left=t.x-i.width/2+"px",this.el.style.top=t.y-i.height+"px"},t.prototype.onRemove=function(){this.$el.remove(),this.$el=null,this.el=null},t.prototype.show=function(e){var t=Array.prototype.slice.call(arguments);return e===!1&&(t[0]=0),this.$el.fadeIn.apply(this.$el,t)},t.prototype.hide=function(e){var t=Array.prototype.slice.call(arguments);return e===!1&&(t[0]=0),this.$el.fadeOut.apply(this.$el,t)},t.prototype.animate=function(){return this.$el.animate.apply(this.$el,arguments)},t.prototype.css=function(){return this.$el.css.apply(this.$el,arguments)},t.prototype.find=function(){return this.$el.find.apply(this.$el,arguments)},t.prototype.addClass=function(){return this.$el.addClass.apply(this.$el,arguments)},t.prototype.removeClass=function(){return this.$el.removeClass.apply(this.$el,arguments)},t.prototype.hasClass=function(){return this.$el.hasClass.apply(this.$el,arguments)}})}(jQuery),function(e){var t=window.GoogleMapStyle=function(e){this.styles=e||[]};t.prototype.set=function(e,t,i,s){var o=!1;this.each(function(s){if(!(s.featureType!==e&&(s.featureType||e)||s.elementType!==t&&(s.elementType||t)))return s.stylers=this.toStylers(i),o=!0,!1}),o||this.styles.push({featureType:e,elementType:t,stylers:this.toStylers(i)}),s&&this.findSubtypes(e,t).forEach(function(e){this.unset(e.featureType,e.elementType)}.bind(this))},t.prototype.all=function(e,t,i,s){this.each(function(s){s.featureType!==e&&e&&"all"!==e&&(!s.featureType||0!==s.featureType.indexOf(e+"."))||s.elementType!==t&&(s.elementType||t)||(s.stylers=this.toStylers(i))}),s&&this.findSubtypes(e,t).forEach(function(e){this.unset(e.featureType,e.elementType)}.bind(this))},t.prototype.unset=function(e,t,i){this.each(function(i,s){if(!(i.featureType!==e&&(i.featureType||e)||i.elementType!==t&&(i.elementType||t)))return this.styles.splice(s,1),!1}),i&&this.findSubtypes(e,t).forEach(function(e){this.unset(e.featureType,e.elementType)}.bind(this))},t.prototype.add=function(t,i,s,o){var n=!1;this.each(function(o){if(!(o.featureType!==t&&(o.featureType||t)||o.elementType!==i&&(o.elementType||i)))return e.each(s,function(t,i){var s=!1;if(e.each(o.stylers,function(e,n){if("undefined"!=typeof n[t])return o.stylers[e][t]=i,s=!0,!1}),!s){var n={};n[t]=i,o.stylers=o.stylers||[],o.stylers.push(n)}}),n=!0,!1}),n||this.set(t,i,s),o&&this.findSubtypes(t,i).forEach(function(e){this.remove(e.featureType,e.elementType,Object.keys(s))}.bind(this))},t.prototype.remove=function(t,i,s,o){s="string"==typeof s?[s]:s;var n=!1;this.each(function(o){if(!(o.featureType!==t&&(o.featureType||t)||o.elementType!==i&&(o.elementType||i)))return s.forEach(function(t){e.each(o.stylers,function(e,i){if("undefined"!=typeof i[t])return o.stylers.splice(e,1),!1})}.bind(this)),o.stylers.length||this.unset(t,i),n=!0,!1}),n||this.unset(t,i,o),o&&this.findSubtypes(t,i).forEach(function(e){this.remove(e.featureType,e.elementType,s)}.bind(this))},t.prototype.toStylers=function(t){var i=[];return e.each(t,function(e,t){var s={};s[e]=t,i.push(s)}),i},t.prototype.findSubtypes=function(e,t){var i=[],s=e?e+".":null,o=t?t+".":null;return this.each(function(n){var r=!1,l=!!n.featureType,a=!!n.elementType,p=n.featureType===e,y=n.elementType===t,h=l&&(0===n.featureType.indexOf(s)||"all"===e&&"all"!==n.featureType),f=a&&(0===n.elementType.indexOf(o)||"all"===t&&"all"!==n.elementType);(!l&&!e||l&&(p||h))&&a&&f&&(r=i.push(n)),r||t||!(!a||l&&h)||l&&h&&(r=i.push(n)),!r&&l&&a&&((p&&f||h&&y||f&&h)&&(r=i.push(n)),!r&&p&&!t&&a&&(r=i.push(n)))}),i},t.prototype.each=function(e,t){return e===!0?void this.getStyles().forEach(function(e){e.stylers&&e.stylers.forEach(function(i){t.call(this,i,e.featureType,e.elementType)})}):void this.getStyles().forEach(e.bind(this))},t.prototype.getStyles=function(){return this.styles}}(jQuery),GoogleMap.STYLES.dark=function(){return[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}]},GoogleMap.STYLES.desaturate=function(){return[{featureType:"all",stylers:[{saturation:-100}]}]},GoogleMap.STYLES["monochrome-dark"]=function(){return[{featureType:"all",elementType:"all",stylers:[{color:"#7f7f7f"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{lightness:0}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{lightness:-90}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{lightness:-76}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{lightness:-82},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{lightness:-80}]},{featureType:"poi",elementType:"geometry",stylers:[{lightness:-72}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{lightness:-80}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{lightness:-60},{weight:.75}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{lightness:-92}]},{featureType:"road.local",elementType:"geometry",stylers:[{lightness:-92}]},{featureType:"transit",elementType:"geometry",stylers:[{lightness:-92}]},{featureType:"water",elementType:"geometry",stylers:[{lightness:-88}]}]},GoogleMap.STYLES.monochrome=function(){return[{featureType:"all",elementType:"all",stylers:[{color:"#7f7f7f"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{lightness:0}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{lightness:90}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{lightness:70}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{lightness:85},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{lightness:80}]},{featureType:"poi",elementType:"geometry",stylers:[{lightness:70}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{lightness:60}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{lightness:95},{weight:.75}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{lightness:93}]},{featureType:"road.local",elementType:"geometry",stylers:[{lightness:93}]},{featureType:"transit",elementType:"geometry",stylers:[{lightness:93}]},{featureType:"water",elementType:"geometry",stylers:[{lightness:90}]}]};
