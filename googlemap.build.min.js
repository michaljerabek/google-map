!function(t){var e=window.GoogleMaps=function(){var t=[],e=!1,o=function(o){return o instanceof GoogleMap&&(t.push(o),e&&o.init(),o)},i=function(){t.forEach(function(t){t.init()}),e=!0};return window.googleMapsInit=function(){window.GoogleMaps.$EVENT.trigger("googleMapInit.GoogleMap"),"function"==typeof window.GoogleMaps.onInit&&window.GoogleMaps.onInit(),google.maps.event.addDomListener(window,"load",i)},{addMap:o}}();e.$EVENT=t({})}(jQuery),function(t){var e={el:"#map",zoom:13,controls:!1,styles:[]},o=window.GoogleMap=function t(e){if("object"!=typeof e)throw"Options required.";if(this.options=e,!this.options.coords)throw"Coords are required.";this.options.el||(this.options.el=t.DEFAULTS.el),this.options.zoom||(this.options.zoom=t.DEFAULTS.zoom),this.options.styles||(this.options.styles=t.DEFAULTS.styles),this.el=null,this.$el=null,this.map=null,this.markers=[],this._markers=[],this._infos=[],this.infos=[],this._htmls=[],this.HTMLs=[],GoogleMaps.addMap(this)};o.DEFAULTS=e,o.STYLES={},o.STYLES.empty=function(){return[]},o.prototype.init=function(){this.$el=this.options.el.jquery?this.options.el:t(this.options.el),this.el=this.$el[0];var e={zoom:this.options.zoom};this.options.coords instanceof google.maps.LatLng?e.location=this.options.coords:e.location=new google.maps.LatLng(this.options.coords[0],this.options.coords[1]),this.options.styles instanceof GoogleMapStyle?e.styles=this.options.styles.getStyles():e.styles=this.options.styles,e.center=e.location,this.options.controls||o.DEFAULTS.controls||(e.zoomControl=!1,e.mapTypeControl=!1,e.scaleControl=!1,e.streetViewControl=!1,e.rotateControl=!1,e.fullscreenControl=!1),this.options.options&&(e=t.extend({},e,this.options.options)),this.map=new google.maps.Map(this.el,e),this.initialized=!0,this.options.markers?this.options.markers.forEach(this.addMarker.bind(this)):(this.options.icon||this.options.addMarker)&&this.addMarker({coords:e.location,icon:this.options.icon,info:this.options.info}),this.options.html&&(this.options.html instanceof Array?this.options.html.forEach(this.addHTML.bind(this)):this.addHTML(this.options.html)),this._markers.forEach(this.addMarker.bind(this)),this._infos.forEach(this.addInfo.bind(this)),this._htmls.forEach(this.addHTML.bind(this)),"function"==typeof this.options.onInit&&this.options.onInit.call(this)},o.prototype.addMarker=function(e){if(e=e||{},!this.initialized)return void this._markers.push(e);!e.coords||e.coords instanceof google.maps.LatLng||(e.coords=new google.maps.LatLng(e.coords[0],e.coords[1]));var o={position:e.coords||this.map.location,map:this.map,icon:e.icon||this.options.icon};e.options&&(o=t.extend({},o,e.options));var i=new google.maps.Marker(o);return e.info&&this.addInfo({content:e.info,marker:i}),this.markers.push(i),i},o.prototype.addInfo=function(e){if(e=e||{},!this.initialized)return void this._infos.push(e);e.marker=e.marker||this.markers[this.markers.length-1];var o={content:e.content};e.options&&(o=t.extend({},o,e.options));var i=new google.maps.InfoWindow(o),s=!1;return google.maps.event.addListener(e.marker,"touchend",function(){s=!0,i.open(this.map,this)}),google.maps.event.addListener(e.marker,"click",function(){return s?void(s=!1):void i.open(this.map,this)}),this.infos.push(i),i},o.prototype.addHTML=function(t){if(!this.initialized)return void this._htmls.push(t);var e="string"==typeof t||t instanceof HTMLElement?t:t.html,o="object"!=typeof t||t instanceof HTMLElement?null:t.coords,i="object"!=typeof t||t instanceof HTMLElement?null:t.draw,s=new GoogleMapHTMLOverlay(this.map,e,o,i);return this.HTMLs.push(s),s},o.getStyles=function(t,e){var i;return i=o.STYLES[t]?new GoogleMapStyle(o.STYLES[t]()):new GoogleMapStyle(o.STYLES.empty()),"function"==typeof e&&e.call(i),i}}(jQuery),function(t){var e=window.GoogleMapHTMLOverlay=function(t,e,o,i){this.html=e,this.$el=null,this.el=null,this.map=t,i&&(this.draw=i),o instanceof google.maps.LatLng?this.position=o:o instanceof google.maps.Marker?this.position=o.position:o instanceof Array?this.position=new google.maps.LatLng(o[0],o[1]):this.position=this.map.location,this.setMap(t)};GoogleMaps.$EVENT.on("googleMapInit.GoogleMap",function(){e.prototype=new google.maps.OverlayView,e.prototype.onAdd=function(){var e=this.getPanes();this.$el=t("<div></div>"),this.$el.css("position","absolute").html(this.html).appendTo(e.overlayLayer),this.el=this.$el[0]},e.prototype.draw=function(){var t=this.getProjection(),e=t.fromLatLngToDivPixel(this.position),o={width:this.el.offsetWidth,height:this.el.offsetHeight};this.el.style.left=e.x-o.width/2+"px",this.el.style.top=e.y-o.height+"px"},e.prototype.onRemove=function(){this.$el.remove(),this.$el=null,this.el=null},e.prototype.show=function(){return this.$el.fadeIn.apply(this.$el,arguments)},e.prototype.hide=function(){return this.$el.fadeOut.apply(this.$el,arguments)},e.prototype.animate=function(){return this.$el.animate.apply(this.$el,arguments)},e.prototype.css=function(){return this.$el.css.apply(this.$el,arguments)},e.prototype.find=function(){return this.$el.find.apply(this.$el,arguments)},e.prototype.addClass=function(){return this.$el.addClass.apply(this.$el,arguments)},e.prototype.removeClass=function(){return this.$el.removeClass.apply(this.$el,arguments)},e.prototype.hasClass=function(){return this.$el.hasClass.apply(this.$el,arguments)}})}(jQuery),function(t){var e=window.GoogleMapStyle=function(t){this.styles=t||[]};e.prototype.set=function(t,e,o,i){var s=!1;this.each(function(i){if(!(i.featureType!==t&&(i.featureType||t)||i.elementType!==e&&(i.elementType||e)))return i.stylers=this.toStylers(o),s=!0,!1}),s||this.styles.push({featureType:t,elementType:e,stylers:this.toStylers(o)}),i&&this.findSubtypes(t,e).forEach(function(t){this.unset(t.featureType,t.elementType)}.bind(this))},e.prototype.all=function(t,e,o,i){this.each(function(i){i.featureType!==t&&t&&"all"!==t&&(!i.featureType||0!==i.featureType.indexOf(t+"."))||i.elementType!==e&&(i.elementType||e)||(i.stylers=this.toStylers(o))}),i&&this.findSubtypes(t,e).forEach(function(t){this.unset(t.featureType,t.elementType)}.bind(this))},e.prototype.unset=function(t,e,o){this.each(function(o,i){if(!(o.featureType!==t&&(o.featureType||t)||o.elementType!==e&&(o.elementType||e)))return this.styles.splice(i,1),!1}),o&&this.findSubtypes(t,e).forEach(function(t){this.unset(t.featureType,t.elementType)}.bind(this))},e.prototype.add=function(e,o,i,s){var n=!1;this.each(function(s){if(!(s.featureType!==e&&(s.featureType||e)||s.elementType!==o&&(s.elementType||o)))return t.each(i,function(e,o){var i=!1;if(t.each(s.stylers,function(t,n){if("undefined"!=typeof n[e])return s.stylers[t][e]=o,i=!0,!1}),!i){var n={};n[e]=o,s.stylers=s.stylers||[],s.stylers.push(n)}}),n=!0,!1}),n||this.set(e,o,i),s&&this.findSubtypes(e,o).forEach(function(t){this.remove(t.featureType,t.elementType,Object.keys(i))}.bind(this))},e.prototype.remove=function(e,o,i,s){i="string"==typeof i?[i]:i;var n=!1;this.each(function(s){if(!(s.featureType!==e&&(s.featureType||e)||s.elementType!==o&&(s.elementType||o)))return i.forEach(function(e){t.each(s.stylers,function(t,o){if("undefined"!=typeof o[e])return s.stylers.splice(t,1),!1})}.bind(this)),s.stylers.length||this.unset(e,o),n=!0,!1}),n||this.unset(e,o,s),s&&this.findSubtypes(e,o).forEach(function(t){this.remove(t.featureType,t.elementType,i)}.bind(this))},e.prototype.toStylers=function(e){var o=[];return t.each(e,function(t,e){var i={};i[t]=e,o.push(i)}),o},e.prototype.findSubtypes=function(t,e){var o=[],i=t?t+".":null,s=e?e+".":null;return this.each(function(n){var r=!1,p=!!n.featureType,l=!!n.elementType,a=n.featureType===t,h=n.elementType===e,f=p&&(0===n.featureType.indexOf(i)||"all"===t&&"all"!==n.featureType),u=l&&(0===n.elementType.indexOf(s)||"all"===e&&"all"!==n.elementType);(!p&&!t||p&&(a||f))&&l&&u&&(r=o.push(n)),r||e||!(!l||p&&f)||p&&f&&(r=o.push(n)),!r&&p&&l&&((a&&u||f&&h||u&&f)&&(r=o.push(n)),!r&&a&&!e&&l&&(r=o.push(n)))}),o},e.prototype.each=function(t){this.getStyles().forEach(t.bind(this))},e.prototype.getStyles=function(){return this.styles}}(jQuery);
